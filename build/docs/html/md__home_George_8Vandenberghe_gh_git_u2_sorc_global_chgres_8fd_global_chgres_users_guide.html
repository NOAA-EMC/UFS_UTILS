<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>UFS_UTILS: global_chgres_users_guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">UFS_UTILS
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Types&#160;List</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__home_George_8Vandenberghe_gh_git_u2_sorc_global_chgres_8fd_global_chgres_users_guide.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">global_chgres_users_guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>HOW TO CONVERT A SURFACE RESTART FILE</p>
<p><a class="anchor" id="global_chgres_users_guide"></a> 1.0 INTRODUCTION</p>
<p>NEAREST NEIGHBOR INTERPOLATION IS PERFORMED SO THAT LAND/NONLAND POINTS ON THE INPUT GRID ARE MAPPED TO LAND/NONLAND POINTS ON THE TARGET GRID. IF THE INPUT FILE CONTAINS LANDICE AND THE OUTPUT GRID IS TO HAVE LANDICE, THEN NONLAND IS MAPPED TO NONLAND, LANDICE IS MAPPED TO LANDICE, ICE FREE LAND IS MAPPED TO ICE FREE LAND. OPTIONALLY, THE CLIMO FIELDS SUCH AS ALBEDO, ROUGHNESS, ETC, MAY DETERMINED ON THE OUTPUT GRID FROM SFCCYCLE (WHICH IS CALLED FROM THE SURFACE CHGRES MODULE). THE LATTER IS RECOMMENDED WHEN CONVERTING FROM A LOW TO HIGH RESOLUTION GRID. A NEW LAND-SEA MASK IS OPTIONALLY READ IN. IF IT IS MISSING, THE NEW LAND-SEA MASK IS INTERPOLATED FROM THE OLD MASK. SKIN AND SOIL TEMPERATURE OVER LAND ARE ADJUSTED FOR DIFFERENCES BETWEEN THE INPUT AND OUTPUT OROGRAPHY. LIQ SOIL MOISTURE IS CALCULATED ACCORDING TO THE ADJUSTED TEMP. OUTPUT OROGRAPHY MAY BE READ IN FROM FILE OR INTERPOLATED FROM INPUT OROGRAPHY. NOTE: OLDER VERSIONS OF THE SURFACE RESTART FILE (BEFORE IVS 200501) DO NOT HAVE OROGRAPHY RECORDS. IN CASES WHERE THE INPUT SURFACE FILE IS PRE 200501, THE PROGRAM WILL GET THE OROGRAPHY FROM THE SIGMA FILE. THEREFORE, YOU MUST SET THE OPTIONS TO CONVERT A SIGMA FILE AS WELL AS A SURFACE FILE. WHEN CHANGING A PRE 200501 FILE, THE PROGRAM WILL INTERPOLATE ONLY THOSE LAND FIELDS NEEDED TO RUN THE OLD OSU LAND MODEL AND OLD SEA ICE PHYSICS. WHEN CHANGING A 200501 FILE, THE PROGRAM WILL INTERPOLATE/CALC THOSE ADDITIONAL FIELDS NEEDED BY THE NOAH LSM (MAX SNOW ALB, LIQ. SOIL MOIST, SNOW DEPTH, PRECIP, PRECIP TYPE, SLOPE TYPE, MAX/MIN GREENNESS) AND THE NEW SEA ICE MODEL (ICE DEPTH AND FRACTION). WHEN CHANGING A PRE 200501 FILE TO A 200501 FILE, THE PROGRAM WILL AUTOMATICALLY INITIALIZE THE ABOVE MENTIONED FIELDS USING EITHER GUESS VALUES OR VALUES CALCULATED FROM SFCCYCLE. THE PROGRAM WILL ALSO CONVERT FROM TWO TO FOUR SOIL LAYERS AND VICE VERSA. THE PROGRAM WILL RUN ON THE FULL OR REDUCED GRID DEPENDING ON THE LONSPERLAT RECORD OF THE INPUT FILE OR WHETHER THE USER SPECIFIES AN EXTERNAL LONSPERLAT FILE. THE PROGRAM WILL INITIALIZE ALL LAND STATES FOR THE LANDICE PHYSICS IF DESIRED. THE PROGRAM WILL SCALE TOTAL SOIL MOISTURE FOR ANY DIFFERENCES IN SOIL TYPE BETWEEN THE INPUT AND OUTPUT GRIDS. CONTACT G. GAYNO WITH QUESTIONS.</p>
<p>2.0 HOW TO RUN CHGRES</p>
<p>THE PROGRAM IS CONTROLLED BY SETTING SEVERAL ENVIRONMENT VARIABLES IN THE DRIVER SCRIPT.</p>
<p>LSOIL - NUMBER OF SOIL LAYERS ON OUTPUT GRID. WHEN NOT SET, THE DEFAULT IS SAME AS INPUT GRID. OTHERWISE, MAY BE SET TO 2 OR 4 LAYERS.</p>
<p>IVSSFC - THE VERSION NUMBER OF THE SURFACE RESTART FILE</p>
<p>LANDICE_OPT - THE LANDICE PHYSICS OPTIONS: 1-NO LANDICE ON INPUT GRID -&gt; INITIALIZE LANDICE ON OUTPUT GRID 2-LANDICE ON INPUT GRID -&gt; LANDICE ON OUTPUT GRID 3-NO LANDICE ON INPUT GRID -&gt; NO LANDICE ON OUTPUT GRID 4-LANDICE ON INPUT GRID -&gt; REMOVE LANDICE FROM OUTPUT GRID 5-INITIALIZE LANDICE OUTPUT GRID REGARDLESS OF WHETHER INPUT GRID HAS LANDICE OR NOT.</p>
<p>CLIMO_FIELDS_OPT - OPTION FOR DETERMINING CLIMATOLOGICAL FIELDS ON OUTPUT GRID. 1-INTERPOLATE ALL FROM INPUT GRID 2-INTERPOLATE VEG, SOIL, SLOPE TYPE FROM INPUT GRID. OTHERS FROM SFCCYCLE PROGRAM. 3-ALL FROM SFCCYCLE PROGRAM.</p>
<p>#-----------------------------------------------------------------&mdash; </p>
<h1>Example #1: convert a t382 file with 4 soil layers and noah lsm</h1>
<h1>physics and NO landice, to a 254 file with 2 soil layers and</h1>
<h1>osu lsm physics (and no landice).</h1>
<p>#-----------------------------------------------------------------&mdash;</p>
<p>export CLIMO_FIELDS_OPT=3 export LANDICE_OPT=3 export IVSSFC=200004 export LSOIL=2</p>
<p>./global_chgres.sh NULL \ ./t382.sfc.input.file \ NULL \ ./t254.sfc.output.file \ 254 0 768 384</p>
<p>#-----------------------------------------------------------------&mdash; </p>
<h1>Example #2: convert a t382 file with 4 soil layers and noah lsm</h1>
<h1>physics AND landice fields, to a 254 file with 2 soil layers and</h1>
<h1>osu lsm physics (and no landice).</h1>
<p>#-----------------------------------------------------------------&mdash;</p>
<p>export CLIMO_FIELDS_OPT=3 export LANDICE_OPT=4 export IVSSFC=200004 export LSOIL=2</p>
<p>./global_chgres.sh NULL \ ./t382.sfc.input.file \ NULL \ ./t254.sfc.output.file \ 254 0 768 384</p>
<p>#-----------------------------------------------------------------&mdash; </p>
<h1>Example #3: convert a t254 file with 2 soil layers and osu lsm</h1>
<h1>physics, to a t382 file with 4 soil layers and noah lsm physics and</h1>
<h1>NO landice initialization.</h1>
<h1>note: the old style surface files do not have terrain, so you</h1>
<h1>must get this field from a sigma file.</h1>
<p>#-----------------------------------------------------------------&mdash;</p>
<p>export CLIMO_FIELDS_OPT=3 export LANDICE_OPT=3 export IVSSFC=200501 export LSOIL=4</p>
<p>./global_chgres.sh ./t254.sig.input.file \ ./t254.sfc.input.file \ ./t382.sig.output.file \ ./t382.sfc.output.file 382 0 1152 576</p>
<p>#-----------------------------------------------------------------&mdash; </p>
<h1>Example #4: convert a t254 file with 2 soil layers and osu lsm</h1>
<h1>physics, to a t382 file with 4 soil layers and noah lsm physics</h1>
<h1>and landice initialization.</h1>
<h1>note: the old style surface files do not have terrain, so you</h1>
<h1>must get this field from a sigma file.</h1>
<p>#-----------------------------------------------------------------&mdash;</p>
<p>export CLIMO_FIELDS_OPT=3 export LANDICE_OPT=1 export IVSSFC=200501 export LSOIL=4</p>
<p>./global_chgres.sh ./t254.sig.input.file \ ./t254.sfc.input.file \ ./t382.sig.output.file \ ./t382.sfc.output.file 382 0 1152 576 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
